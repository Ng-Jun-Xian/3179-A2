{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Coffee Consumption vs. Cardiovascular Disease Deaths (1990-2019)",
    "subtitle": "Global averages from complete datasets (joined by year, not by country)",
    "anchor": "middle",
    "fontSize": 20,
    "fontWeight": "bold"
  },
  "width": "container",
  "height": 600,
  "autosize": {
    "type": "fit",
    "contains": "padding"
  },
  "layer": [
    {
      "data": {
        "url": "Coffee_consumption_per_capita.csv"
      },
      "transform": [
        {"filter": "datum.Year >= 1990 && datum.Year <= 2019"},
        {
          "aggregate": [
            {"op": "mean", "field": "Consumption_Per_Capita_kg", "as": "avg_coffee"}
          ],
          "groupby": ["Year"]
        }
      ],
      "mark": {
        "type": "line",
        "color": "#8B4513",
        "strokeWidth": 3,
        "point": {"filled": true, "size": 60, "color": "#8B4513"}
      },
      "encoding": {
        "x": {
          "field": "Year",
          "type": "quantitative",
          "scale": {"domain": [1990, 2020]},
          "axis": {
            "title": "Year",
            "titleFontSize": 13,
            "labelFontSize": 11,
            "format": "d",
            "tickCount": 10,
            "orient": "bottom"
          }
        },
        "y": {
          "field": "avg_coffee",
          "type": "quantitative",
          "scale": {"domain": [0, 3.5]},
          "axis": {
            "title": "Coffee Consumption (kg per capita)",
            "titleColor": "#8B4513",
            "titleFontSize": 13,
            "labelFontSize": 11,
            "tickCount": 7
          }
        },
        "tooltip": [
          {"field": "Year", "type": "quantitative", "title": "Year"},
          {"field": "avg_coffee", "type": "quantitative", "title": "Coffee Consumption", "format": ".2f"}
        ]
      }
    },
    {
      "data": {
        "url": "Coffee_consumption_per_capita.csv"
      },
      "transform": [
        {"filter": "datum.Year >= 1990 && datum.Year <= 2019"},
        {
          "aggregate": [
            {"op": "mean", "field": "Consumption_Per_Capita_kg", "as": "avg_coffee"}
          ],
          "groupby": ["Year"]
        },
        {"filter": "datum.Year == 1990 || datum.Year == 2019"}
      ],
      "mark": {
        "type": "text",
        "align": "left",
        "dx": 8,
        "dy": -10,
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#8B4513"
      },
      "encoding": {
        "x": {"field": "Year", "type": "ordinal", "axis": null},
        "y": {"field": "avg_coffee", "type": "quantitative", "axis": null}      
      }
    },
    {
      "data": {
        "url": "cardiovascular-disease-death-rate-crude-versus-age-standardized.csv"
      },
      "transform": [
        {"filter": "datum.Year >= 1990 && datum.Year <= 2019"},
        {
          "aggregate": [
            {"op": "mean", "field": "Age-standardized deaths from cardiovascular diseases in both sexes in those aged all ages per 100,000 people", "as": "avg_cvd"}
          ],
          "groupby": ["Year"]
        }
      ],
      "mark": {
        "type": "line",
        "color": "#C13838",
        "strokeWidth": 3,
        "strokeDash": [6, 3],
        "point": {"filled": true, "size": 60, "color": "#C13838"}
      },
      "encoding": {
        "x": {
          "field": "Year",
          "type": "quantitative",
          "axis": null
        },
        "y": {
          "field": "avg_cvd",
          "type": "quantitative",
          "scale": {"domain": [0, 350]},
          "axis": {
            "title": "CVD Deaths (per 100,000)",
            "titleColor": "#C13838",
            "titleFontSize": 13,
            "labelFontSize": 11,
            "orient": "right",
            "tickCount": 7
          }
        },
        "tooltip": [
          {"field": "Year", "type": "ordinal", "title": "Year"},
          {"field": "avg_cvd", "type": "quantitative", "title": "CVD Deaths", "format": ".1f"}
        ]
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Ng-Jun-Xian/3179-A2/main/cardiovascular-disease-death-rate-crude-versus-age-standardized.csv"
      },
      "transform": [
        {"filter": "datum.Year >= 1990 && datum.Year <= 2019"},
        {
          "aggregate": [
            {"op": "mean", "field": "Age-standardized deaths from cardiovascular diseases in both sexes in those aged all ages per 100,000 people", "as": "avg_cvd"}
          ],
          "groupby": ["Year"]
        },
        {"filter": "datum.Year == 1990 || datum.Year == 2019"}
      ],
      "mark": {
        "type": "text",
        "align": "right",
        "dx": -8,
        "dy": 12,
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#C13838"
      },
      "encoding": {
        "x": {"field": "Year", "type": "quantitative", "axis": null},
        "y": {"field": "avg_cvd", "type": "quantitative", "axis": null}
      }
    },
    {
      "data": {"values": [{}]},
      "mark": {
        "type": "text",
        "align": "center",
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#8B4513",
        "dx": 280,
        "dy": -220
      },
      "encoding": {
        "text": {"value": "━━━ Coffee Consumption"}
      }
    },
    {
      "data": {"values": [{}]},
      "mark": {
        "type": "text",
        "align": "center",
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#C13838",
        "dx": -280,
        "dy": -220
      },
      "encoding": {
        "text": {"value": "- - - CVD Deaths"}
      }
    },
    {
      "data": {"values": [{}]},
      "mark": {
        "type": "text",
        "align": "center",
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#000000",
        "dx": 350,
        "dy": -120
      },
      "encoding": {
        "text": {"value": "Coffee Consumption gradually increased from 2003 to 2019"}
      }
    },
    {
      "data": {"values": [{}]},
      "mark": {
        "type": "text",
        "align": "center",
        "fontSize": 12,
        "fontWeight": "bold",
        "color": "#000000",
        "dx": 400,
        "dy": 20
      },
      "encoding": {
        "text": {"value": "CVD Deaths steadily decreased from 2003 to 2019"}
      }
    }
  ],
  "resolve": {
    "scale": {"y": "independent"}
  },
  "config": {
    "view": {"stroke": null}
  }
}